{"version":3,"sources":["../../src/pages/mapa/mapa.module.ts","../../src/pages/mapa/mapa.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MapaPage } from './mapa';\n\n@NgModule({\n  declarations: [\n    MapaPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MapaPage),\n  ],\n})\nexport class MapaPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mapa/mapa.module.ts","import { Component, NgZone } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { LoadingController } from 'ionic-angular';\nimport { ToastController } from 'ionic-angular';\nimport { AlertController } from 'ionic-angular';\n\ndeclare var google;\n/**\n * Generated class for the MapaPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-mapa',\n  templateUrl: 'mapa.html',\n})\nexport class MapaPage {\n\n  map: any;\n  markers: any;\n  autocomplete: any;\n  GoogleAutocomplete: any;\n  GooglePlaces: any;\n  geocoder: any\n  autocompleteItems: any;\n  loading: any;\n\n  quiz_data: any;\n\n  charada_atual: number = 0;\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    public zone: NgZone,\n    public geolocation: Geolocation,\n    public loadingCtrl: LoadingController,\n    public toastCtrl: ToastController,\n    private alertCtrl: AlertController\n  ) {\n    this.geocoder = new google.maps.Geocoder;\n    let elem = document.createElement(\"div\")\n    this.GooglePlaces = new google.maps.places.PlacesService(elem);\n    this.GoogleAutocomplete = new google.maps.places.AutocompleteService();\n    this.autocomplete = {\n      input: ''\n    };\n    this.autocompleteItems = [];\n    this.markers = [];\n    this.loading = this.loadingCtrl.create();\n\n    this.quiz_data = navParams.get('data');\n    \n  }\n\n  ionViewDidEnter(){\n    \n    this.loading.present();\n    this.geolocation.getCurrentPosition()\n      .then((resp) => {\n        this.map = new google.maps.Map(document.getElementById('map'), {\n          center: {lat: resp.coords.latitude, lng: resp.coords.longitude},\n          zoom: 18\n        });\n        this.loading.dismiss();\n        this.presentAlert(\"Primeira charada:\", this.quiz_data.quiz[this.charada_atual].charada);\n    });\n    \n  }\n\n  tryGeolocation(){\n    this.loading.present();\n    this.clearMarkers();//remove previous markers\n\n    this.geolocation.getCurrentPosition().then((resp) => {\n      let pos = {\n        lat: resp.coords.latitude,\n        lng: resp.coords.longitude\n      };\n      let marker = new google.maps.Marker({\n        position: pos,\n        map: this.map,\n        title: 'Estou aqui!'\n      });\n      this.markers.push(marker);\n      this.map.setCenter(pos);\n      this.loading.dismiss();\n\n    }).catch((error) => {\n      console.log('Error getting location', error);\n      this.loading.dismiss();\n    });\n  }\n\n  updateSearchResults(){\n    if (this.autocomplete.input == '') {\n      this.autocompleteItems = [];\n      return;\n    }\n    this.GoogleAutocomplete.getPlacePredictions({ input: this.autocomplete.input },\n      (predictions, status) => {\n        this.autocompleteItems = [];\n        if(predictions){\n          this.zone.run(() => {\n            predictions.forEach((prediction) => {\n              this.autocompleteItems.push(prediction);\n            });\n          });\n        }\n    });\n  }\n\n  selectSearchResult(item){\n\n    if (typeof(item)=='undefined') return;\n\n    this.clearMarkers();\n    this.autocompleteItems = [];\n\n    this.geocoder.geocode({'placeId': item.place_id}, (results, status) => {\n      if(status === 'OK' && results[0]){\n        \n        let marker = new google.maps.Marker({\n          position: results[0].geometry.location,\n          map: this.map\n        });\n\n        this.markers.push(marker);\n\n        google.maps.event.addListener(marker, 'click', () => {\n          this.zone.run(() => {\n            if (item.place_id.toLowerCase() == this.quiz_data.quiz[this.charada_atual].place_id) {\n              \n              this.charada_atual++;\n              if (this.quiz_data.quiz.length == this.charada_atual) {\n                this.presentAlert(\"Parabéns!\", \"Você ganhou o jogo!\");\n              } else {\n                this.presentAlert(\"Acertou! Próxima charada: \", this.quiz_data.quiz[this.charada_atual].charada);\n              }\n            } else {\n              this.presentAlert(\"Resposta incorreta!\", \"Dê outro palpite.\");\n            }\n\n            this.autocomplete.input = '';\n            this.autocompleteItems = [];\n            this.clearMarkers();\n          });\n        });\n    \n        this.map.setCenter(results[0].geometry.location);\n        this.presentToast(\"Toque no marcador escolhido.\");\n      }\n    })\n  }\n\n  clearMarkers(){\n    for (var i = 0; i < this.markers.length; i++) {\n      console.log(this.markers[i])\n      this.markers[i].setMap(null);\n    }\n    this.markers = [];\n  }\n\n  lembrarCharada() {\n    this.presentToast(\"Charada: \" + this.quiz_data.quiz[this.charada_atual].charada);\n  }\n\n  presentToast(msg: string) {\n    const toast = this.toastCtrl.create({\n      message: msg,\n      duration: 4000\n    });\n    toast.present();\n  }\n\n  presentAlert(alert_title: string, msg: string) {\n    let alert = this.alertCtrl.create({\n      title: alert_title,\n      subTitle: msg,\n      buttons: ['OK!']\n    });\n    alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mapa/mapa.ts"],"sourceRoot":""}